!function(e){function t(n){if(o[n])return o[n].exports;var c=o[n]={exports:{},id:n,loaded:!1};return e[n].call(c.exports,c,c.exports,t),c.loaded=!0,c.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";var n=o(11),c=o(13),i=o(12);n.generate(),c.generate();var r=document.querySelector("#play"),a=document.querySelector("#error");r.onclick=function(){var e=i.matchSequence(i.getCurrSequence());e?(c.runService(e),console.log("running service")):(a.classList.add("active"),setTimeout(function(){a.classList.remove("active")},2e3))}},,,,,,,,,,,function(e,t,o){"use strict";var n=o(12),c=n.blockActions(),i=o(13).getBlocks();t.blockActions=function(){return c},t.generate=function(){var e=document.querySelector("#menu"),t=document.querySelector("#menu-items"),o=!1,r=function(o){var r=document.createElement("li"),a=document.createElement("p");a.textContent=o,r.id="menu-"+o,r.setAttribute("data-id",c[o].join(",")),r.setAttribute("data-service",o),r.onclick=function(){var t=r.querySelectorAll(".block");n.setCurrSequence(this.getAttribute("data-id"));for(var o=0;o<t.length;o++)console.log(t[o]),i[o].setColor(t[o].getAttribute("data-color"));e.click()},c[o].forEach(function(e){var t=document.createElement("button");t.classList.add("block"),t.style.backgroundColor="#"+e,t.setAttribute("data-color",e),r.appendChild(t),r.appendChild(a)}),t.appendChild(r)};for(var a in c)r(a);e.onclick=function(){o?t.classList.remove("active"):t.classList.add("active"),o=!o}}},function(e,t){"use strict";var o={draw:["ff0048","8f00af","ff0048","8f00af","ff0048","8f00af"],camera:["00cc66","ffb600","0097ff","00cc66","ffb600","0097ff"]},n={},c=void 0;for(var i in o)n[o[i].join(",")]=i;t.blockActions=function(){return o},t.matchSequence=function(e){return n[e]||!1},t.getCurrSequence=function(){return c},t.setCurrSequence=function(e){c=e}},function(e,t,o){"use strict";var n=o(12),c=o(14),i=o(17),r=["ff0048","ff6500","ffb600","00cc66","0097ff","8f00af"],a={};t.getBlocks=function(){return a},t.runService=function(e){switch(e){case"draw":c.generate();break;case"camera":i.generate()}},t.generate=function(){function e(e){a[e.count]=new o,a[e.count].color=e.color,a[e.count].colorPosition=e.colorPosition,a[e.count].position=e.position;var n=document.createElement("button");n.classList.add("block"),n.id="block-"+e.count,n.style.backgroundColor="#"+e.color,t.appendChild(n),n.onclick=function(){this.cycleColor()}.bind(a[e.count])}var t=document.querySelector(".terminal"),o=function(){this.setColor=function(e){this.color=e,document.querySelector("#block-"+this.position).style.backgroundColor="#"+this.color,localforage.setItem("blocks",JSON.stringify(a),function(e){e&&console.log(e)})},this.cycleColor=function(){this.colorPosition++,this.colorPosition>r.length-1&&(this.colorPosition=0),this.color=r[this.colorPosition],document.querySelector("#block-"+this.position).style.backgroundColor="#"+this.color;var e=[];for(var t in a)e.push(a[t].color);n.setCurrSequence(e.join(",")),localforage.setItem("blocks",JSON.stringify(a),function(e){e&&console.log(e)})}.bind(this)},c=[];localforage.getItem("blocks",function(t,o){if(t||!o)!function(){var t=0;r.forEach(function(o){e({count:t,color:o,colorPosition:t,position:t}),c.push(o),t++})}();else{o=JSON.parse(o);for(var i in o)e({count:i,color:o[i].color,colorPosition:o[i].colorPosition,position:o[i].position}),c.push(o[i].color)}n.setCurrSequence(c.join(","))})}},function(e,t){"use strict";function o(){i.lineCap="round",i.globalCompositeOperation=g,i.beginPath(),i.moveTo(s,l),i.lineTo(d,u),i.strokeStyle=b,i.lineWidth=C,i.stroke(),i.shadowBlur=10,i.shadowColor="rgba(255, 255, 255, 0.95)",i.stroke(),i.shadowBlur=12,i.shadowColor="rgba(255, 255, 255, 0.85)",i.stroke(),i.shadowBlur=15,i.shadowColor=p,i.stroke(),i.shadowBlur=18,i.shadowColor=p,i.stroke(),i.shadowBlur=30,i.shadowColor=p,i.stroke(),i.closePath()}function n(){function e(e,t){switch(t.touches?(f=t.touches[0].clientX,v=t.touches[0].clientY):(f=t.clientX,v=t.clientY-105),e){case"down":s=d,l=u,d=f,u=v,a=!0,r=!0,r&&(i.beginPath(),i.fillStyle=b,i.fillRect(d,u,2,2),i.closePath(),r=!1);break;case"up":case"out":a=!1;break;case"move":a&&(s=d,l=u,d=f,u=v,o())}}i=c.getContext("2d"),c.addEventListener("mouseup",function(t){e("up",t)},!1),c.addEventListener("mousedown",function(t){e("down",t)},!1),c.addEventListener("mouseout",function(t){e("out",t)},!1),c.addEventListener("mousemove",function(t){e("move",t)},!1)}var c=void 0,i=void 0,r=!1,a=!1,s=0,l=0,d=0,u=0,f=void 0,v=void 0,h=window.innerWidth,m=window.innerHeight,p="rgba(255, 0, 128, 0.8)",g="screen",b="#fff",C=10;t.generate=function(){c=document.createElement("canvas"),c.id="service-draw";var e=document.createElement("div");e.style.width=h+"px",e.style.height=m+"px",c.width=h,c.height=m;var t=document.createElement("div");t.classList.add("handle"),t.style.width=h+"px";var o=document.createElement("div");o.textContent="✖",o.classList.add("close-service"),o.onclick=function(){document.body.removeChild(this.parentNode),p="rgba(255, 0, 128, 0.8)",g="screen"},e.appendChild(o);var r=document.createElement("div");r.textContent="⬇",r.classList.add("save"),r.onclick=function(){i.fillStyle="#111111",i.fill();var e=c.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");window.location.href=e},e.appendChild(r);var a={pink:{rgba:"rgba(255, 0, 128, 0.8)"},blue:{rgba:"rgba(0, 134, 255, 0.8)"},green:{rgba:"rgba(0, 220, 0, 0.8)"}},s=void 0;for(var l in a)s=document.createElement("div"),s.classList.add("color"),s.classList.add(l),s.style.backgroundColor=a[l].rgba,s.onclick=function(){p=this.style.backgroundColor;for(var e in a)document.querySelector("."+e).classList.remove("active");this.classList.add("active")},t.appendChild(s);var d=["screen","color-burn"],u=void 0;d.forEach(function(e){u=document.createElement("div"),u.classList.add("filter"),u.classList.add(e),u.textContent=e,u.onclick=function(){g=this.textContent,d.forEach(function(e){document.querySelector("."+e).classList.remove("active")}),this.classList.add("active")},t.appendChild(u)}),e.id="canvas-wrapper",e.appendChild(t),e.appendChild(c),t.querySelector(".pink").classList.add("active"),t.querySelector(".screen").classList.add("active"),document.body.appendChild(e),n()}},,,function(e,t){"use strict";function o(e){var t=document.createElement("video");t.setAttribute("autoplay",!0);var o=document.createElement("div");o.style.width=c+"px",o.style.height=i+"px";var n=document.createElement("div");n.classList.add("handle"),n.style.width=c+"px";var r=document.createElement("div");r.textContent="✖",r.classList.add("close-service"),r.onclick=function(){document.body.removeChild(this.parentNode)},o.appendChild(r),o.appendChild(n),o.appendChild(t),o.id="video-wrapper",document.body.appendChild(o),window.stream=e,t.src=window.URL.createObjectURL(e)}function n(e){console.log("navigator.getUserMedia error: ",e)}var c=600,i=450,r={audio:!1,video:!0};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,t.generate=function(){navigator.getUserMedia(r,o,n)}}]);